<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three Tribes Chronicle</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="game-graphics.css">
</head>
<body>
    <div id="app">
        <!-- Start Screen -->
        <div id="start-screen" class="screen">
            <div class="container">
                <h1 class="title">üåç Three Tribes Chronicle</h1>
                <p class="subtitle">A text-driven RPG with tribal simulation</p>
                
                <div class="start-form">
                    <input type="text" id="player-name" placeholder="Enter your name" value="Aro">
                    <select id="tribe-select">
                        <option value="Stonefang">Stonefang - Earth-bound warriors</option>
                        <option value="Windveil">Windveil - Agile hunters</option>
                        <option value="Emberroot">Emberroot - Scholars and mystics</option>
                    </select>
                    <button id="start-new-game" class="btn btn-primary">Start New Game</button>
                    <button id="load-game-btn" class="btn btn-secondary">Load Game</button>
                </div>
            </div>
        </div>

        <!-- Load Game Screen -->
        <div id="load-screen" class="screen">
            <div class="container">
                <h2>Load Game</h2>
                <div id="saves-list"></div>
                <button id="back-to-start" class="btn btn-secondary">Back</button>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-container">
                <div class="game-layout">
                    <!-- Left Panel - Character & Tribe -->
                    <aside class="left-panel">
                        <!-- Player Status -->
                        <section class="card">
                            <h2>üìä Character</h2>
                            <div id="player-status"></div>
                        </section>

                        <!-- Tribe Status -->
                        <section class="card">
                            <h2>üèõÔ∏è <span id="tribe-name">Stonefang</span> Tribe</h2>
                            <div id="tribe-status"></div>
                        </section>

                        <!-- World State -->
                        <section class="card">
                            <h2>üåç World State</h2>
                            <div id="world-status"></div>
                        </section>

                        <!-- NPCs -->
                        <section class="card">
                            <h2>üë• Tribal Members</h2>
                            <div id="npcs-list"></div>
                        </section>

                        <!-- Inventory -->
                        <section class="card inventory-card">
                            <h2>üéí Inventory</h2>
                            <div class="inventory-container">
                                <!-- Equipment Slots -->
                                <div class="equipment-section">
                                    <h3 class="inventory-subtitle">Equipment</h3>
                                    <div class="equipment-grid">
                                        <div class="equipment-slot" data-slot="weapon" title="Weapon">
                                            <div class="slot-label">‚öîÔ∏è</div>
                                            <div class="slot-item" id="equipped-weapon"></div>
                                        </div>
                                        <div class="equipment-slot" data-slot="armor" title="Armor">
                                            <div class="slot-label">üõ°Ô∏è</div>
                                            <div class="slot-item" id="equipped-armor"></div>
                                        </div>
                                        <div class="equipment-slot" data-slot="accessory1" title="Accessory 1">
                                            <div class="slot-label">üíç</div>
                                            <div class="slot-item" id="equipped-accessory1"></div>
                                        </div>
                                        <div class="equipment-slot" data-slot="accessory2" title="Accessory 2">
                                            <div class="slot-label">üíç</div>
                                            <div class="slot-item" id="equipped-accessory2"></div>
                                        </div>
                                        <div class="equipment-slot" data-slot="accessory3" title="Accessory 3">
                                            <div class="slot-label">üíç</div>
                                            <div class="slot-item" id="equipped-accessory3"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Bag/Inventory Grid -->
                                <div class="bag-section">
                                    <h3 class="inventory-subtitle">Bag <span id="bag-count">(0/50)</span></h3>
                                    <div class="bag-grid" id="bag-grid">
                                        <!-- Bag slots will be generated here -->
                                    </div>
                                </div>
                            </div>
                        </section>
                    </aside>

                    <!-- Main Content -->
                    <main class="main-content">
                        <!-- Top Row: Map and Actions -->
                        <div class="top-row">
                            <!-- World Map -->
                            <section class="card map-card">
                                <h2>üó∫Ô∏è Map</h2>
                                <div class="map-wrapper">
                                    <div class="map-canvas" id="map-canvas">
                                        <!-- Map terrain and NPCs will be rendered here -->
                                    </div>
                                </div>
                            </section>

                            <!-- Actions -->
                            <section class="card actions-card">
                                <!-- Floating Status Bar -->
                                <div class="status-bar-floating">
                                    <div class="status-group">
                                        <span class="status-label">Day</span>
                                        <span class="status-value" id="current-day">1</span>
                                    </div>
                                    <div class="status-group">
                                        <span class="status-icon">‚ö°</span>
                                        <span class="status-value" id="stamina">5</span>
                                        <span class="status-separator">/</span>
                                        <span class="status-value" id="max-stamina">5</span>
                                    </div>
                                    <div class="status-group">
                                        <span class="status-icon">‚ù§Ô∏è</span>
                                        <span class="status-value" id="health">100</span>
                                        <span class="status-separator">/</span>
                                        <span class="status-value" id="max-health">100</span>
                                    </div>
                                    <div class="status-group status-actions">
                                        <a href="npc-manager.html" class="status-link" title="Manage NPCs">üë•</a>
                                        <a href="game-master.html" class="status-link" title="Game Master">üéÆ</a>
                                    </div>
                                </div>
                                
                                <!-- Enemy Encounter Window (Top) -->
                                <div class="encounter-window" id="encounter-window">
                                    <div class="encounter-placeholder">
                                        <span class="encounter-icon">‚öîÔ∏è</span>
                                        <span class="encounter-text">No encounter</span>
                                    </div>
                                </div>
                                
                                <!-- Action Buttons (Bottom) -->
                                <div class="actions-section">
                                    <h2>üìã Actions</h2>
                                    <div class="actions-grid-compact">
                                        <button class="action-btn-compact" data-action="farm" data-stamina="1" title="Farm - Cost: 1 Stamina">
                                            <span class="icon">üåæ</span>
                                            <span class="label">Farm</span>
                                            <span class="stamina-cost">‚ö°1</span>
                                        </button>
                                        <button class="action-btn-compact" data-action="gather" data-stamina="1" title="Gather - Cost: 1 Stamina">
                                            <span class="icon">üåø</span>
                                            <span class="label">Gather</span>
                                            <span class="stamina-cost">‚ö°1</span>
                                        </button>
                                        <button class="action-btn-compact" data-action="trade" data-stamina="1" title="Trade - Cost: 1 Stamina">
                                            <span class="icon">üí∞</span>
                                            <span class="label">Trade</span>
                                            <span class="stamina-cost">‚ö°1</span>
                                        </button>
                                        <button class="action-btn-compact" data-action="hunt" data-stamina="2" title="Hunt - Cost: 2 Stamina">
                                            <span class="icon">üèπ</span>
                                            <span class="label">Hunt</span>
                                            <span class="stamina-cost">‚ö°2</span>
                                        </button>
                                        <button class="action-btn-compact" data-action="explore" data-stamina="2" title="Explore - Cost: 2 Stamina">
                                            <span class="icon">üó∫Ô∏è</span>
                                            <span class="label">Explore</span>
                                            <span class="stamina-cost">‚ö°2</span>
                                        </button>
                                    </div>
                                    <div class="action-buttons-compact">
                                        <button id="end-day-btn" class="btn btn-primary btn-compact">üåô End Day</button>
                                    </div>
                                </div>
                            </section>
                        </div>

                        <!-- Messages/Events -->
                        <section class="card messages-card">
                            <h2>üìú Events & Messages</h2>
                            <div id="messages" class="messages"></div>
                        </section>
                    </main>
                </div>
            </div>
        </div>

        <!-- NPC Selection Modal -->
        <div id="npc-modal" class="modal">
            <div class="modal-content">
                <h2>Choose an NPC to Visit</h2>
                <div id="npc-selection"></div>
                <button class="btn btn-secondary" id="close-npc-modal">Cancel</button>
            </div>
        </div>

        <!-- Combat Window -->
        <div id="combat-window" class="combat-window">
            <div class="combat-container">
                <div class="combat-header">
                    <h2>‚öîÔ∏è Combat Encounter</h2>
                </div>
                
                <div class="combat-battlefield">
                    <!-- Enemy Side -->
                    <div class="combat-side enemy-side">
                        <div class="combat-character-card enemy-card">
                            <div class="character-avatar enemy-avatar">
                                <span id="enemy-emoji">üê∫</span>
                            </div>
                            <div class="character-info">
                                <h3 id="enemy-name">Wild Animal</h3>
                                <div class="level-badge" id="enemy-level">Lv. 1</div>
                            </div>
                            <div class="health-bar-container">
                                <div class="health-bar-label">
                                    <span>Health</span>
                                    <span id="enemy-health-text">100/100</span>
                                </div>
                                <div class="health-bar">
                                    <div class="health-bar-fill enemy-health" id="enemy-health-bar" style="width: 100%"></div>
                                </div>
                            </div>
                            <div class="stat-grid" id="enemy-stats">
                                <div class="stat-item">
                                    <span class="stat-label">STR</span>
                                    <span class="stat-value" id="enemy-str">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">DEX</span>
                                    <span class="stat-value" id="enemy-dex">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">DMG</span>
                                    <span class="stat-value" id="enemy-damage">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- VS Divider -->
                    <div class="combat-vs">
                        <div class="vs-line"></div>
                        <div class="vs-text">VS</div>
                        <div class="vs-line"></div>
                    </div>
                    
                    <!-- Player Side -->
                    <div class="combat-side player-side">
                        <div class="combat-character-card player-card">
                            <div class="character-avatar player-avatar">
                                <span>‚öîÔ∏è</span>
                            </div>
                            <div class="character-info">
                                <h3 id="player-combat-name">Player</h3>
                                <div class="level-badge" id="player-combat-level">Lv. 1</div>
                            </div>
                            <div class="health-bar-container">
                                <div class="health-bar-label">
                                    <span>Health</span>
                                    <span id="player-health-text">100/100</span>
                                </div>
                                <div class="health-bar">
                                    <div class="health-bar-fill player-health" id="player-health-bar" style="width: 100%"></div>
                                </div>
                            </div>
                            <div class="stat-grid" id="player-combat-stats">
                                <div class="stat-item">
                                    <span class="stat-label">STR</span>
                                    <span class="stat-value" id="player-str">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">DEX</span>
                                    <span class="stat-value" id="player-dex">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">LCK</span>
                                    <span class="stat-value" id="player-luck">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="combat-actions-panel">
                    <button class="combat-btn combat-btn-fight" id="fight-btn">
                        <span class="btn-icon">‚öîÔ∏è</span>
                        <span class="btn-text">Fight</span>
                    </button>
                    <button class="combat-btn combat-btn-flee" id="flee-btn">
                        <span class="btn-icon">üèÉ</span>
                        <span class="btn-text">Flee</span>
                    </button>
                </div>
                
                <div class="combat-message" id="combat-message"></div>
            </div>
        </div>
    </div>

        <!-- Save Slots Modal -->
        <div id="save-slots-modal" class="modal">
            <div class="modal-content save-slots-modal-content">
                <div class="modal-header">
                    <h2>üíæ Save Slots</h2>
                    <button class="modal-close" onclick="saveManager.hideModal()">√ó</button>
                </div>
                <div id="save-slots-container" class="save-slots-container">
                    <!-- Save slots will be rendered here -->
                </div>
            </div>
        </div>

        <script src="map-renderer.js"></script>
        <script src="save-manager.js"></script>
        <script src="app.js"></script>
    </body>
</html>

